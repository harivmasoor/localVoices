{"ast":null,"code":"import _regeneratorRuntime from\"/Users/harimasoor/Desktop/current/localVoices/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/harimasoor/Desktop/current/localVoices/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/harimasoor/Desktop/current/localVoices/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{Link,useHistory,Redirect}from'react-router-dom';import*as sessionActions from\"../../store/session\";import{useDispatch}from\"react-redux\";import{useSelector}from'react-redux';import\"./LoginForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){var setShowModal=_ref.setShowModal,setShowSignupModal=_ref.setShowSignupModal;var dispatch=useDispatch();var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),credential=_useState2[0],setCredential=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var credentialRef=useRef();var passwordRef=useRef();var sessionUser=useSelector(function(state){return state.session.user;});if(sessionUser){return/*#__PURE__*/_jsx(Redirect,{to:\"/news_feed\"});}var handleCredentialChange=function handleCredentialChange(e){setCredential(e.target.value);if(!e.target.value)e.target.placeholder=\" \";};var handlePasswordChange=function handlePasswordChange(e){setPassword(e.target.value);if(!e.target.value)e.target.placeholder=\" \";};var handleSubmit=function handleSubmit(e){e.preventDefault();setErrors([]);return dispatch(sessionActions.login({credential:credential,password:password})).then(function(){// Navigate after successful dispatch\nhistory.push(\"/news_feed\");}).catch(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var _data;var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return res.clone().json();case 3:data=_context.sent;_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);_context.next=10;return res.text();case 10:data=_context.sent;case 11:if((_data=data)!==null&&_data!==void 0&&_data.errors)setErrors(data.errors);else if(data)setErrors([data]);else setErrors([res.statusText]);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function(_x){return _ref2.apply(this,arguments);};}());};var handleDemoLogin=function handleDemoLogin(){setCredential(\"July4th@1776.com\");setPassword(\"password\");credentialRef.current.focus();setTimeout(function(){return passwordRef.current.focus();},100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error){return/*#__PURE__*/_jsx(\"li\",{children:error},error);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{ref:credentialRef,type:\"text\",value:credential,onChange:handleCredentialChange,required:true,id:\"credential-input\",placeholder:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"credential-input\",children:\"Username, Email, or Phone Number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{ref:passwordRef,type:showPassword?\"text\":\"password\",value:password,onChange:handlePasswordChange,required:true,id:\"password-input\",placeholder:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password-input\",children:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"toggle-password\",onClick:function onClick(){return setShowPassword(function(prev){return!prev;});},children:showPassword?'🙈':'👁'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"demo-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDemoLogin,children:\"George Washington\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-link\",children:[\"New to Localvoices?\",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\" Sign up\"})]})]})]});}export default LoginForm;","map":{"version":3,"names":["React","useState","useRef","Link","useHistory","Redirect","sessionActions","useDispatch","useSelector","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","setShowModal","setShowSignupModal","dispatch","history","_useState","_useState2","_slicedToArray","credential","setCredential","_useState3","_useState4","password","setPassword","_useState5","_useState6","showPassword","setShowPassword","_useState7","_useState8","errors","setErrors","credentialRef","passwordRef","sessionUser","state","session","user","to","handleCredentialChange","e","target","value","placeholder","handlePasswordChange","handleSubmit","preventDefault","login","then","push","catch","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_data","data","wrap","_callee$","_context","prev","next","clone","json","sent","t0","text","statusText","stop","_x","apply","arguments","handleDemoLogin","current","focus","setTimeout","className","children","onSubmit","map","error","ref","type","onChange","required","id","htmlFor","onClick"],"sources":["/Users/harimasoor/Desktop/current/localVoices/frontend/src/components/LoginFormPage/LoginForm.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Link, useHistory, Redirect } from 'react-router-dom';\nimport * as sessionActions from \"../../store/session\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from 'react-redux';\nimport \"./LoginForm.css\";\n\n\nfunction LoginForm({ setShowModal, setShowSignupModal }) { \n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [credential, setCredential] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [showPassword, setShowPassword] = useState(false); \n    const [errors, setErrors] = useState([]);\n    const credentialRef = useRef();\n    const passwordRef = useRef();\n    const sessionUser = useSelector(state => state.session.user);\n    if (sessionUser) {\n      return <Redirect to='/news_feed' />\n    }\n\n    const handleCredentialChange = (e) => {\n        setCredential(e.target.value);\n        if(!e.target.value) e.target.placeholder = \" \";\n    }\n\n    const handlePasswordChange = (e) => {\n        setPassword(e.target.value);\n        if(!e.target.value) e.target.placeholder = \" \";\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setErrors([]);\n        return dispatch(sessionActions.login({ credential, password }))\n            .then(() => {\n            // Navigate after successful dispatch\n                history.push(\"/news_feed\");\n            })\n            .catch(async (res) => {\n                let data;\n                try {\n                    data = await res.clone().json();\n                } catch {\n                    data = await res.text();\n                }\n                if (data?.errors) setErrors(data.errors);\n                else if (data) setErrors([data]);\n                else setErrors([res.statusText]);\n            });\n    };\n\n    const handleDemoLogin = () => {\n        setCredential(\"July4th@1776.com\");\n        setPassword(\"password\");\n        credentialRef.current.focus();\n        setTimeout(() => passwordRef.current.focus(), 100);\n      }\n\n    return (\n        <div className=\"login-form-container\">\n            <h1>Welcome Back</h1>\n            <form onSubmit={handleSubmit}>\n                <ul>\n                    {errors.map(error => <li key={error}>{error}</li>)}\n                </ul>\n                <div className=\"input-container\">\n                    <input\n                        ref={credentialRef}\n                        type=\"text\"\n                        value={credential}\n                        onChange={handleCredentialChange}\n                        required\n                        id=\"credential-input\"\n                        placeholder=\"\"\n                    />\n                    <label htmlFor=\"credential-input\">Username, Email, or Phone Number</label>\n                </div>\n                <div className=\"input-container\">\n                    <input\n                        ref={passwordRef}\n                        type={showPassword ? \"text\" : \"password\"}\n                        value={password}\n                        onChange={handlePasswordChange}\n                        required\n                        id=\"password-input\"\n                        placeholder=\"\"\n                    />\n                    <label htmlFor=\"password-input\">Password</label>\n                    <button \n                        type=\"button\" \n                        className=\"toggle-password\"\n                        onClick={() => setShowPassword(prev => !prev)}\n                    >\n                        {showPassword ? '🙈' : '👁'}\n                    </button>\n                </div>\n                <div className=\"button-container\">\n                <button type=\"submit\">Log In</button>\n                </div>\n                <div className=\"demo-container\">\n                    <button onClick={handleDemoLogin}>George Washington</button>\n                </div>\n                <div className=\"signup-link\">\n                New to Localvoices? \n                <Link to=\"/\"> Sign up</Link>\n            </div>\n            </form>\n        </div>\n    );\n}\n\nexport default LoginForm;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}